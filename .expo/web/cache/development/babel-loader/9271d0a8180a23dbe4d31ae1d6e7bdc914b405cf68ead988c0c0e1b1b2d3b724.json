{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\nimport { StyledComponent as _StyledComponent } from \"nativewind\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport CartItem from \"../components/CartItem\";\nimport TotalSummaryCard from \"../components/TotalSummaryCard\";\nimport CartContext from \"../features/cartContext\";\nimport { getCartItems } from \"../features/firebase/cart\";\nimport AuthContext from \"../features/authContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Cart = function Cart(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    total = _useState2[0],\n    setTotal = _useState2[1];\n  var _useContext = useContext(AuthContext),\n    currentUser = _useContext.currentUser,\n    isLoggedIn = _useContext.isLoggedIn;\n  var _useContext2 = useContext(CartContext),\n    cartItems = _useContext2.cartItems,\n    setCartItems = _useContext2.setCartItems;\n  var calculateTotalAmount = function () {\n    var _ref2 = _asyncToGenerator(function* (data) {\n      var subTotal = yield data.reduce(function (acc, item) {\n        return acc + Number(item.price) * Number(item.qty);\n      }, 0);\n      setTotal(subTotal.toFixed(2));\n    });\n    return function calculateTotalAmount(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var fetchCartItems = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      var res = yield getCartItems();\n      if (res.success === true) {\n        setCartItems(res.data);\n        setTotal(res.subTotal);\n        calculateTotalAmount(res.data);\n      }\n    });\n    return function fetchCartItems() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    navigation.setOptions({\n      headerShown: false\n    });\n    fetchCartItems();\n  }, [currentUser, cartItems == null ? void 0 : cartItems.length]);\n  return _jsxs(_StyledComponent, {\n    className: \"flex-1 w-full p-5 bg-white\",\n    component: SafeAreaView,\n    children: [_jsx(View, {\n      children: _jsx(_StyledComponent, {\n        className: \"font-bold text-xl\",\n        component: Text,\n        children: \"My Cart\"\n      })\n    }), isLoggedIn ? _jsx(_StyledComponent, {\n      className: \"mt-4 \",\n      showsVerticalScrollIndicator: false,\n      component: ScrollView,\n      children: cartItems == null ? void 0 : cartItems.map(function (item) {\n        return _jsx(CartItem, {\n          id: item.id,\n          title: item.title,\n          brand: item.brand,\n          qty: item.qty,\n          image: item.image,\n          price: item.price\n        }, item.id);\n      })\n    }) : _jsx(_StyledComponent, {\n      className: \"flex-1 items-center justify-center \",\n      component: View,\n      children: _jsx(_StyledComponent, {\n        className: \"font-bold text-lg\",\n        component: Text,\n        children: \"Login to view your Cart!\"\n      })\n    }), _jsx(View, {\n      children: _jsx(TotalSummaryCard, {\n        totalPrice: total\n      })\n    })]\n  });\n};\nexport default Cart;\n_NativeWindStyleSheet.create({\n  styles: {\n    \"mt-4\": {\n      \"marginTop\": 16\n    },\n    \"w-full\": {\n      \"width\": \"100%\"\n    },\n    \"flex-1\": {\n      \"flexGrow\": 1,\n      \"flexShrink\": 1,\n      \"flexBasis\": \"0%\"\n    },\n    \"items-center\": {\n      \"alignItems\": \"center\"\n    },\n    \"justify-center\": {\n      \"justifyContent\": \"center\"\n    },\n    \"bg-white\": {\n      \"backgroundColor\": \"#fff\"\n    },\n    \"p-5\": {\n      \"paddingTop\": 20,\n      \"paddingRight\": 20,\n      \"paddingBottom\": 20,\n      \"paddingLeft\": 20\n    },\n    \"font-bold\": {\n      \"fontWeight\": \"700\"\n    },\n    \"text-lg\": {\n      \"fontSize\": 18,\n      \"lineHeight\": 28\n    },\n    \"text-xl\": {\n      \"fontSize\": 20,\n      \"lineHeight\": 28\n    }\n  }\n});","map":{"version":3,"names":["React","useContext","useEffect","useState","SafeAreaView","CartItem","TotalSummaryCard","CartContext","getCartItems","AuthContext","jsx","_jsx","jsxs","_jsxs","Cart","_ref","navigation","_useState","_useState2","_slicedToArray","total","setTotal","_useContext","currentUser","isLoggedIn","_useContext2","cartItems","setCartItems","calculateTotalAmount","_ref2","_asyncToGenerator","data","subTotal","reduce","acc","item","Number","price","qty","toFixed","_x","apply","arguments","fetchCartItems","_ref3","res","success","setOptions","headerShown","length","_StyledComponent","className","component","children","View","Text","showsVerticalScrollIndicator","ScrollView","map","id","title","brand","image","totalPrice","_NativeWindStyleSheet","create","styles"],"sources":["D:/Android/vuongletrung/fashion/src/screens/CartScreen.js"],"sourcesContent":["import { Text, View, ScrollView } from \"react-native\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport CartItem from \"../components/CartItem\";\nimport TotalSummaryCard from \"../components/TotalSummaryCard\";\nimport CartContext from \"../features/cartContext\";\nimport { getCartItems } from \"../features/firebase/cart\";\nimport AuthContext from \"../features/authContext\";\n\nconst Cart = ({ navigation }) => {\n  const [total, setTotal] = useState();\n  const { currentUser, isLoggedIn } = useContext(AuthContext);\n  const { cartItems, setCartItems } = useContext(CartContext);\n\n  const calculateTotalAmount = async (data) => {\n    const subTotal = await data.reduce(\n      (acc, item) => acc + (Number(item.price)*Number(item.qty)),\n      0\n    );\n    setTotal(subTotal.toFixed(2));\n  };\n\n  const fetchCartItems = async () => {\n    const res = await getCartItems();\n    if (res.success === true) {\n      setCartItems(res.data);\n      setTotal(res.subTotal);\n      calculateTotalAmount(res.data);\n    }\n  };\n\n  useEffect(() => {\n    navigation.setOptions({\n      headerShown: false,\n    });\n    fetchCartItems();\n  }, [currentUser, cartItems?.length]);\n  return (\n    <SafeAreaView className=\"flex-1 w-full p-5 bg-white\">\n      <View>\n        <Text className=\"font-bold text-xl\">My Cart</Text>\n      </View>\n      {isLoggedIn ? (\n          <ScrollView className=\"mt-4 \" showsVerticalScrollIndicator={false}>\n            {cartItems?.map((item) => (\n              <CartItem\n                key={item.id}\n                id={item.id}\n                title={item.title}\n                brand={item.brand}\n                qty={item.qty}\n                image={item.image}\n                price={item.price}\n              />\n            ))}\n          </ScrollView>\n\n      ) : (\n        <View className=\"flex-1 items-center justify-center \">\n          <Text className=\"font-bold text-lg\">Login to view your Cart!</Text>\n        </View>\n      )}\n          <View>\n            <TotalSummaryCard totalPrice={total} />\n          </View>\n    </SafeAreaView>\n  );\n};\n\nexport default Cart;\n"],"mappings":";;;;;;;AACA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC9D,SAASC,YAAY,QAAQ,gCAAgC;AAC7D,OAAOC,QAAQ;AACf,OAAOC,gBAAgB;AACvB,OAAOC,WAAW;AAClB,SAASC,YAAY;AACrB,OAAOC,WAAW;AAAgC,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAElD,IAAMC,IAAI,GAAG,SAAPA,IAAIA,CAAAC,IAAA,EAAuB;EAAA,IAAjBC,UAAU,GAAAD,IAAA,CAAVC,UAAU;EACxB,IAAAC,SAAA,GAA0Bd,QAAQ,CAAC,CAAC;IAAAe,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAA7BG,KAAK,GAAAF,UAAA;IAAEG,QAAQ,GAAAH,UAAA;EACtB,IAAAI,WAAA,GAAoCrB,UAAU,CAACQ,WAAW,CAAC;IAAnDc,WAAW,GAAAD,WAAA,CAAXC,WAAW;IAAEC,UAAU,GAAAF,WAAA,CAAVE,UAAU;EAC/B,IAAAC,YAAA,GAAoCxB,UAAU,CAACM,WAAW,CAAC;IAAnDmB,SAAS,GAAAD,YAAA,CAATC,SAAS;IAAEC,YAAY,GAAAF,YAAA,CAAZE,YAAY;EAE/B,IAAMC,oBAAoB;IAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,WAAOC,IAAI,EAAK;MAC3C,IAAMC,QAAQ,SAASD,IAAI,CAACE,MAAM,CAChC,UAACC,GAAG,EAAEC,IAAI;QAAA,OAAKD,GAAG,GAAIE,MAAM,CAACD,IAAI,CAACE,KAAK,CAAC,GAACD,MAAM,CAACD,IAAI,CAACG,GAAG,CAAE;MAAA,GAC1D,CACF,CAAC;MACDjB,QAAQ,CAACW,QAAQ,CAACO,OAAO,CAAC,CAAC,CAAC,CAAC;IAC/B,CAAC;IAAA,gBANKX,oBAAoBA,CAAAY,EAAA;MAAA,OAAAX,KAAA,CAAAY,KAAA,OAAAC,SAAA;IAAA;EAAA,GAMzB;EAED,IAAMC,cAAc;IAAA,IAAAC,KAAA,GAAAd,iBAAA,CAAG,aAAY;MACjC,IAAMe,GAAG,SAASrC,YAAY,CAAC,CAAC;MAChC,IAAIqC,GAAG,CAACC,OAAO,KAAK,IAAI,EAAE;QACxBnB,YAAY,CAACkB,GAAG,CAACd,IAAI,CAAC;QACtBV,QAAQ,CAACwB,GAAG,CAACb,QAAQ,CAAC;QACtBJ,oBAAoB,CAACiB,GAAG,CAACd,IAAI,CAAC;MAChC;IACF,CAAC;IAAA,gBAPKY,cAAcA,CAAA;MAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;IAAA;EAAA,GAOnB;EAEDxC,SAAS,CAAC,YAAM;IACdc,UAAU,CAAC+B,UAAU,CAAC;MACpBC,WAAW,EAAE;IACf,CAAC,CAAC;IACFL,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,CAACpB,WAAW,EAAEG,SAAS,oBAATA,SAAS,CAAEuB,MAAM,CAAC,CAAC;EACpC,OAAApC,KAAA,CAAAqC,gBAAA;IACgBC,SAAS,EAAC,4BAA4B;IAAAC,SAAA,EAAAhD,YAAA;IAAAiD,QAAA,GAClD1C,IAAA,CAAC2C,IAAI;MAAAD,QAAA,EAAA1C,IAAA,CAAAuC,gBAAA;QACGC,SAAS,EAAC,mBAAmB;QAAAC,SAAA,EAAAG,IAAA;QAAAF,QAAA,EAAC;MAAO;IAAA,CACvC,CAAC,EACN7B,UAAU,GAAAb,IAAA,CAAAuC,gBAAA;MACKC,SAAS,EAAC,OAAO;MAACK,4BAA4B,EAAE,KAAM;MAAAJ,SAAA,EAAAK,UAAA;MAAAJ,QAAA,EAC/D3B,SAAS,oBAATA,SAAS,CAAEgC,GAAG,CAAC,UAACvB,IAAI;QAAA,OACnBxB,IAAA,CAACN,QAAQ;UAEPsD,EAAE,EAAExB,IAAI,CAACwB,EAAG;UACZC,KAAK,EAAEzB,IAAI,CAACyB,KAAM;UAClBC,KAAK,EAAE1B,IAAI,CAAC0B,KAAM;UAClBvB,GAAG,EAAEH,IAAI,CAACG,GAAI;UACdwB,KAAK,EAAE3B,IAAI,CAAC2B,KAAM;UAClBzB,KAAK,EAAEF,IAAI,CAACE;QAAM,GANbF,IAAI,CAACwB,EAOX,CAAC;MAAA,CACH;IAAC,KAAAhD,IAAA,CAAAuC,gBAAA;MAIAC,SAAS,EAAC,qCAAqC;MAAAC,SAAA,EAAAE,IAAA;MAAAD,QAAA,EAAA1C,IAAA,CAAAuC,gBAAA;QAC7CC,SAAS,EAAC,mBAAmB;QAAAC,SAAA,EAAAG,IAAA;QAAAF,QAAA,EAAC;MAAwB;IAAA,EAE/D,EACG1C,IAAA,CAAC2C,IAAI;MAAAD,QAAA,EACH1C,IAAA,CAACL,gBAAgB;QAACyD,UAAU,EAAE3C;MAAM,CAAE;IAAC,CACnC,CAAC;EAAA;AAGjB,CAAC;AAED,eAAeN,IAAI;AAACkD,qBAAA,CAAAC,MAAA;EAAAC,MAAA;IAAA;MAAA;IAAA;IAAA;MAAA;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;IAAA;MAAA;IAAA;IAAA;MAAA;IAAA;IAAA;MAAA;IAAA;IAAA;MAAA;MAAA;MAAA;MAAA;IAAA;IAAA;MAAA;IAAA;IAAA;MAAA;MAAA;IAAA;IAAA;MAAA;MAAA;IAAA;EAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}