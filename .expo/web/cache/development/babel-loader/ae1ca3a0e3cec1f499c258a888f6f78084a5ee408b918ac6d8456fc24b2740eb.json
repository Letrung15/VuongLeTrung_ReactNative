{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { doc, getDoc, updateDoc } from \"firebase/firestore\";\nimport { db, auth } from \"../../../firebase\";\nimport { uuidv4 } from \"@firebase/util\";\nexport var addToOrders = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var userDocRef = doc(db, \"users\", auth.currentUser.uid);\n    var userDocSnapshot = yield getDoc(userDocRef);\n    if (userDocSnapshot.exists()) {\n      var userData = userDocSnapshot.data();\n      var cartItems = userData.cart;\n      var orderItems = orderItems || [];\n      cartItems.map(function (item) {\n        orderItems.push({\n          orderId: uuidv4().replace(/-/g, '').substring(0, 12),\n          id: item.id,\n          image: item.image,\n          title: item.title,\n          brand: item.brand,\n          price: item.price,\n          qty: item.qty,\n          date: new Date().toLocaleString()\n        });\n      });\n      yield updateDoc(userDocRef, {\n        orders: orderItems,\n        cart: []\n      });\n      console.log(\"items added to order\");\n      return {\n        success: true,\n        data: orderItems\n      };\n    }\n  });\n  return function addToOrders() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getAllOrderItems = function () {\n  var _ref2 = _asyncToGenerator(function* () {\n    var userRef = doc(db, \"users\", auth.currentUser.uid);\n    var userDocSnapshot = yield getDoc(userRef);\n    var data = userDocSnapshot.data().orders;\n    return {\n      success: true,\n      data: data\n    };\n  });\n  return function getAllOrderItems() {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["doc","getDoc","updateDoc","db","auth","uuidv4","addToOrders","_ref","_asyncToGenerator","userDocRef","currentUser","uid","userDocSnapshot","exists","userData","data","cartItems","cart","orderItems","map","item","push","orderId","replace","substring","id","image","title","brand","price","qty","date","Date","toLocaleString","orders","console","log","success","apply","arguments","getAllOrderItems","_ref2","userRef"],"sources":["D:/Android/vuongletrung/fashion/src/features/firebase/order.js"],"sourcesContent":["import { doc, getDoc, updateDoc } from \"firebase/firestore\";\nimport { db,auth } from \"../../../firebase\";\nimport { uuidv4 } from \"@firebase/util\";\n\nexport const addToOrders = async () => {\n    const userDocRef = doc(db,\"users\",auth.currentUser.uid)\n    const userDocSnapshot = await getDoc(userDocRef);\n    if(userDocSnapshot.exists()){\n        const userData = userDocSnapshot.data();\n        const cartItems = userData.cart;\n        const orderItems = orderItems||[];\n        cartItems.map(item=>{\n            orderItems.push({\n                orderId: uuidv4().replace(/-/g, '').substring(0, 12),\n                id:item.id,\n                image:item.image,\n                title:item.title,\n                brand:item.brand,\n                price:item.price,\n                qty:item.qty,\n                date: new Date().toLocaleString()\n            })\n        })\n        await updateDoc(userDocRef,{orders:orderItems,cart:[]});\n        console.log(\"items added to order\")\n        return {success:true,data:orderItems}\n    }\n}\n\nexport const getAllOrderItems = async ()=>{\n    const userRef=doc(db,\"users\",auth.currentUser.uid)\n    const userDocSnapshot = await getDoc(userRef)\n    const data = userDocSnapshot.data().orders;\n    return {success:true,data}\n}"],"mappings":";AAAA,SAASA,GAAG,EAAEC,MAAM,EAAEC,SAAS,QAAQ,oBAAoB;AAC3D,SAASC,EAAE,EAACC,IAAI;AAChB,SAASC,MAAM,QAAQ,gBAAgB;AAEvC,OAAO,IAAMC,WAAW;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;IACnC,IAAMC,UAAU,GAAGT,GAAG,CAACG,EAAE,EAAC,OAAO,EAACC,IAAI,CAACM,WAAW,CAACC,GAAG,CAAC;IACvD,IAAMC,eAAe,SAASX,MAAM,CAACQ,UAAU,CAAC;IAChD,IAAGG,eAAe,CAACC,MAAM,CAAC,CAAC,EAAC;MACxB,IAAMC,QAAQ,GAAGF,eAAe,CAACG,IAAI,CAAC,CAAC;MACvC,IAAMC,SAAS,GAAGF,QAAQ,CAACG,IAAI;MAC/B,IAAMC,UAAU,GAAGA,UAAU,IAAE,EAAE;MACjCF,SAAS,CAACG,GAAG,CAAC,UAAAC,IAAI,EAAE;QAChBF,UAAU,CAACG,IAAI,CAAC;UACZC,OAAO,EAAEjB,MAAM,CAAC,CAAC,CAACkB,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAACC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC;UACpDC,EAAE,EAACL,IAAI,CAACK,EAAE;UACVC,KAAK,EAACN,IAAI,CAACM,KAAK;UAChBC,KAAK,EAACP,IAAI,CAACO,KAAK;UAChBC,KAAK,EAACR,IAAI,CAACQ,KAAK;UAChBC,KAAK,EAACT,IAAI,CAACS,KAAK;UAChBC,GAAG,EAACV,IAAI,CAACU,GAAG;UACZC,IAAI,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,cAAc,CAAC;QACpC,CAAC,CAAC;MACN,CAAC,CAAC;MACF,MAAM/B,SAAS,CAACO,UAAU,EAAC;QAACyB,MAAM,EAAChB,UAAU;QAACD,IAAI,EAAC;MAAE,CAAC,CAAC;MACvDkB,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnC,OAAO;QAACC,OAAO,EAAC,IAAI;QAACtB,IAAI,EAACG;MAAU,CAAC;IACzC;EACJ,CAAC;EAAA,gBAvBYZ,WAAWA,CAAA;IAAA,OAAAC,IAAA,CAAA+B,KAAA,OAAAC,SAAA;EAAA;AAAA,GAuBvB;AAED,OAAO,IAAMC,gBAAgB;EAAA,IAAAC,KAAA,GAAAjC,iBAAA,CAAG,aAAU;IACtC,IAAMkC,OAAO,GAAC1C,GAAG,CAACG,EAAE,EAAC,OAAO,EAACC,IAAI,CAACM,WAAW,CAACC,GAAG,CAAC;IAClD,IAAMC,eAAe,SAASX,MAAM,CAACyC,OAAO,CAAC;IAC7C,IAAM3B,IAAI,GAAGH,eAAe,CAACG,IAAI,CAAC,CAAC,CAACmB,MAAM;IAC1C,OAAO;MAACG,OAAO,EAAC,IAAI;MAACtB,IAAI,EAAJA;IAAI,CAAC;EAC9B,CAAC;EAAA,gBALYyB,gBAAgBA,CAAA;IAAA,OAAAC,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GAK5B"},"metadata":{},"sourceType":"module","externalDependencies":[]}